<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Klimalotteri!</title>
    <style>
        body{
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        main img{
            width: 100%;
        }

        main img:hover{
            cursor: pointer;
        }

        main{
            display: grid;
            grid-template-columns: repeat(4, 200px);
        }
    </style>
</head>
<body>
    <h1>Klimalotteri!</h1>
    <p>Finn gevinsten! Du har <span>3</span> muligheter igjen.</p>
    <main>
        <img onclick="velgBilde(event, 0)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 1)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 2)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 3)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 4)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 5)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 6)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 7)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 8)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 9)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 10)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
        <img onclick="velgBilde(event, 11)" src="bilder/sporsmal.jpg" title="Er gevinsten her?">
    </main>

    <script>

        // DOM
        let beskjedTxt = document.querySelector("p");
        let valgIgjenSpan = document.querySelector("p span");
        let alleBildene = document.querySelectorAll("main img");

        // Finner et tilfeldig tall som velger hvilken bilde som har gevinsten
        let gevinstTall = Math.floor(Math.random()*12);
        let valgIgjen = 3;

        "XXX - Bruk en for-løkke til å lage koden i <main>, se i HTML over."

        // Velger et bilde
        function velgBilde(event, valgtBilde){
            let imgEl = event.target;

            // Fant brukeren gevinsten?
            if (valgtBilde === gevinstTall){
                let gevinst;

                // Hva er gevinsten?
                if (valgIgjen>0){
                    imgEl.src = "bilder/elbil.jpg";
                    gevinst = "XXX"
                }
                beskjedTxt.innerHTML = `Grattis du vant ${gevinst}!`;
                imgEl.title = "Gevinsten var her ja!";

                // Avregistrerer lytterfunksjonene
                for (let bilde of alleBildene){
                    // Slett lytteren fra bilde
                    "XXX"
                }
            }else{
                // Minker antall valg du brukeren har igjen
                valgIgjen--;

                // Endrer bilden til et sadface og avregistrerer muligheten å klikke på bilden igjen
                imgEl.src = "bilder/sadface.jpg";
                imgEl.onclick = "";
                imgEl.title = "Gevinsten var ikke her nei...";

                // Hvis det ikke er noen valg igjen
                if (valgIgjen === 0){
                    beskjedTxt.innerHTML = `Dessverre! Du fant ikke gevinsten.`;

                    // Avregistrerer lytterfunksjonene
                    for (let bilde of alleBildene){
                        bilde.removeAttribute("onclick");
                    }
                }else{
                    valgIgjenSpan.innerHTML = valgIgjen;
                }
            }
        }
    </script>
</body>
</html>