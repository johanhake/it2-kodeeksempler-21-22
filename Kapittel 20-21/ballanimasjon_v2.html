<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Ballanimasjon</title>
	<style>
		body {
			background-color: #0e0e0e;
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100vh;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			overflow: hidden;
		}

		div {
			text-align: center;
			color: #f0f0f0;
		}

		canvas {
			border: #f0f0f0 4px solid;
			background-color: gre;
		}
	</style>
</head>

<body>
	<div>
		<h1>Ballanimasjon med requestAnimationframe(): Spillere</h1>
		<p id="info">t = 0</p>
		<canvas width="800" height="600"></canvas>
	</div>

	<script>

		// DOM
		let canvas = document.querySelector("canvas");
		let ctx = canvas.getContext("2d");
		let info = document.querySelector("#info");

		// Objekt med taster som er blitt trykket ned og løftet
		let taster = {};

		// Liste med baller som skal brukes til å oppdattere alle ballene :D
		let baller = [];

		// Parametrer
		let antallHinder = 3;

		// Baseklasse for alle ulike ball objekter
		class Ball{
			constructor(x, y, radius, fillFarge, linjeFarge){
				this._x = x;
				this._y = y;
				this._radius = radius;
				this._fillFarge = fillFarge;
				this._linjeFarge = linjeFarge
			}

			// Metode som tegner ballen
			tegn(){
				// Husk å IKKE kall clearRect her!
			}

		}

		// Klasse som implementerer ett hinder en spiller må unngå å treffe
		class Hinder extends Ball{
			constructor(/* Fyll inn argumenter her! */){
				// Fyll inn kode her!
			}

			// Metode som flytter ballen for hver vindu
			flytt(){
				// Fyll inn kode her!
			}
		}

		// Klasse som implementerer en ball en spiller kan styre
		class Spiller extends Ball{
			constructor(/* Fyll inn argumenter her! */){
				// Fyll inn kode her!
			}

			// Metode som flytter ballen for hver vindu
			flytt(){
				// Fyll inn kode her!
			}
		}

		// Lager Spiller og Hinder ballene
		//baller.push(new Spiller(/* Argumenter */));
		//for (let i=0; i < antallHinder; i++){
		//	baller.push(new Hinder(/* Argumenter */))
		//}

		// Funksjon som flytter og tegner alle ballene
		function animer() {
			// Printer ut n/60 med en desimal for hver 10e t
			if (n % 10 === 0) {
				const t = n/60;
				info.innerHTML = `t = ${avrund(t)} (${x}, ${y})`;
			}
			n += 1;

			// Oppdaterer x og y koordinatene til ballene
			for (let ball of baller){
				ball.flytt();
			}

			// Sletter canvas
			ctx.clearRect(0, 0, canvas.width, canvas.height);

			// Tegner alle ballene
			for (let ball of baller){
				ball.tegn();
			}

			// Tegn neste vindu
			requestAnimationFrame(animer);
		}

		// Lytterfunksjon for å trykke ned en tast
		function tastNed(event) {
			// event.key innholder en streng representasjon av tasten som ble trykket ned.
			taster[event.key] = true;
		}

		// Lytterfunksjon for det å løfte en tast
		function tastOpp(event) {
			// event.key innholder en streng representasjon av tasten som ble løftet.
			taster[event.key] = false;
		}

		// Setter igang animasjonen!
		//requestAnimationFrame(animer);

		// Avrunder en verdi til en desimal
		function avrund(verdi){
			return Math.round(verdi*10)/10;
		}

		// Registrerer lytterfunksjoner på det å trykker ned og løfte en tast
		window.onkeydown = tastNed;
		window.onkeyup = tastOpp;

	</script>
</body>

</html>